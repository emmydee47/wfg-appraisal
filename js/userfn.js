let thisdomain=document.location.origin;if(thisdomain==="http://localhost")thisdomain=thisdomain+"/employeeAppraisal";function submitAppraisal(data){const appraisal_data=data;$.ajax({url:thisdomain+"/api/postAppraisalResponse",type:"POST",data:{action:"post_appraisal",appraisal_data:data},success:function(data,status,xhr){var out=data&&typeof data==="object"?JSON.stringify(data):data;var resp=$.parseJSON(out);if(resp.message===1){sendToLineManager(appraisal_data["appraisal_id"],appraisal_data["emp_id"],1);$("#ap-div").hide();$("#ap-conclusion").removeClass("invisible")}},error:function(xhr,ajaxOptions,thrownError){ew.alert("status: "+xhr.status+", error: "+thrownError)},beforeSend:function(request){}})}function sendToLineManager(appraisalId,userId,level){$.ajax({url:thisdomain+"/api/sendToLineManager",type:"POST",data:{appraisal_id:appraisalId,user_id:userId,level:level},success:function(data,status,xhr){var out=data&&typeof data==="object"?JSON.stringify(data):data;var resp=$.parseJSON(out);if(resp.message==1){ew.alert("Appraisal submitted successfully")}},error:function(xhr,ajaxOptions,thrownError){console.log("status: "+xhr.status+", error: "+thrownError)},beforeSend:function(request){}})}
